/*!
 * Lightbox for Bootstrap 3 by @ashleydw
 * https://github.com/ashleydw/lightbox
 *
 * License: https://github.com/ashleydw/lightbox/blob/master/LICENSE
 */
(function(){"use strict";var a;a=function(a,b){var c,d,e=this;return this.options=$.extend({remote:null,onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},id:!1},b||{}),this.$element=$(a),c="",this.modal_id=this.options.modal_id?this.options.modal_id:"ekkoLightbox-"+Math.floor(1e3*Math.random()+1),d='<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button></div>',$(document.body).append('<div id="'+this.modal_id+'" class="ekko-lightbox modal fade" tabindex="-1"><div class="modal-dialog"><div class="modal-content">'+d+'<div class="modal-body"><div class="ekko-lightbox-container"><div></div></div></div></div></div></div>'),this.modal=$("#"+this.modal_id),this.modal_dialog=this.modal.find(".modal-dialog").first(),this.modal_content=this.modal.find(".modal-content").first(),this.modal_body=this.modal.find(".modal-body").first(),this.lightbox_container=this.modal_body.find(".ekko-lightbox-container").first(),this.lightbox_body=this.lightbox_container.find("> div:first-child").first(),this.border={top:parseFloat(this.modal_dialog.css("border-top-width"))+parseFloat(this.modal_content.css("border-top-width"))+parseFloat(this.modal_body.css("border-top-width")),right:parseFloat(this.modal_dialog.css("border-right-width"))+parseFloat(this.modal_content.css("border-right-width"))+parseFloat(this.modal_body.css("border-right-width")),bottom:parseFloat(this.modal_dialog.css("border-bottom-width"))+parseFloat(this.modal_content.css("border-bottom-width"))+parseFloat(this.modal_body.css("border-bottom-width")),left:parseFloat(this.modal_dialog.css("border-left-width"))+parseFloat(this.modal_content.css("border-left-width"))+parseFloat(this.modal_body.css("border-left-width"))},this.padding={top:parseFloat(this.modal_dialog.css("padding-top"))+parseFloat(this.modal_content.css("padding-top"))+parseFloat(this.modal_body.css("padding-top")),right:parseFloat(this.modal_dialog.css("padding-right"))+parseFloat(this.modal_content.css("padding-right"))+parseFloat(this.modal_body.css("padding-right")),bottom:parseFloat(this.modal_dialog.css("padding-bottom"))+parseFloat(this.modal_content.css("padding-bottom"))+parseFloat(this.modal_body.css("padding-bottom")),left:parseFloat(this.modal_dialog.css("padding-left"))+parseFloat(this.modal_content.css("padding-left"))+parseFloat(this.modal_body.css("padding-left"))},this.modal.on("show.bs.modal",this.options.onShow.bind(this)).on("shown.bs.modal",function(){return e.modal_shown(),e.options.onShown.call(e)}).on("hide.bs.modal",this.options.onHide.bind(this)).on("hidden.bs.modal",function(){return e.modal.remove(),e.options.onHidden.call(e)}).modal("show",b),this.modal},a.prototype={modal_shown:function(){return this.options.remote?this.preloadImage(this.options.remote,!0):this.error("No remote target given")},strip_stops:function(a){return a.replace(/\./g,"")},strip_spaces:function(a){return a.replace(/\s/g,"")},showLoading:function(){return this.lightbox_body.html('<div class="modal-loading">Loading..</div>'),this},error:function(a){return this.lightbox_body.html(a),this},preloadImage:function(a,b){var c,d=this;return c=new Image,(null==b||b===!0)&&(c.onload=function(){var a;return a=$("<img />"),a.attr("src",c.src),a.addClass("img-responsive"),d.lightbox_body.html(a),d.resize(c.width)},c.onerror=function(){return d.error("Failed to load image: "+a)}),c.src=a,c},resize:function(a){var b;return b=a+this.border.left+this.padding.left+this.padding.right+this.border.right,this.modal_dialog.css("width","auto").css("max-width",b),this.lightbox_container.find("a").css("padding-top",function(){return $(this).parent().height()/2}),this},checkDimensions:function(a){var b,c;return c=a+this.border.left+this.padding.left+this.padding.right+this.border.right,b=document.body.clientWidth,c>b&&(a=this.modal_body.width()),a},close:function(){return this.modal.modal("hide")}},$.fn.ekkoLightbox=function(b){return this.each(function(){var c;return c=$(this),b=$.extend({remote:c.attr("data-remote")||c.attr("href")},b,c.data()),new a(this,b),this})}}).call(this);